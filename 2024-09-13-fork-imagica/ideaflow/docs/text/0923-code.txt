首先你是当前项目的开发者，当前项目是用nextjs开发的

现在的问题是：
用户和ai对话完成后，不能直接使用，需要和上一次的对话中的代码合并后才能使用

注意一定不要修改原来的功能，只需要在当前项目上新增代码实现 ai 对话的代码合并功能，并且完成 codehistory 组件


合并代码：
@Codebase @app 帮我在codehistory 组件中将最后两次ai回答的内容进行一个和git类似的代码合并，我知道可能有点难度，因为ai回答的内容并不知道是代码中的那部分发生了改变，所以需要你来帮我处理. 你需要注意的是 chatmessage 的数据类型